<!--
# More resources https://www.reddit.com/r/yugioh/wiki/card_interactions/ # Images
-->

<div align="center">
  <img src="./images/game_mat.png" width="800" />
</div>

<!--
# Details and summary
-->

<details align="left">
  <summary>(1,2) are always applied successfully</summary>
  <img src="./images/image-1.png" />(1900+700)-600 → 2000
</details>

<details align="left">
  <summary align="center">✔️</summary>
  <ul>
    <li>
      <a target="_blank" href="https://db.ygoresources.com/qa#69">"Revendread Slayer", """Book of Moon"""</a>
    </li>
  </ul>
</details>

# Examples list Examples: - ["Nekroz Cycle", "Nekroz of Clausolas"](https://db.ygoresources.com/qa#7022)

<!--
# References/Citation
-->

<em>References:</em>
<ol class="references">
  <li>
    <a target="_blank" href="https://ygorganization.com/perfect-rulebook-2017/">OCG Perfect Rulebook 2017 pages 188-193</a>
  </li>
  <li>
    <a target="_blank" href="https://www.yugioh-card.com/en/rulebook/">Official rulebook pages 3-5</a>
  </li>
  <li>
    <a target="_blank" href="https://ygorganization.com/perfect-rulebook-2017/">OCG Perfect Rulebook 2017 page 42</a>
  </li>
  <li>
    <a target="_blank" href="https://www.yugioh-card.com/en/rulebook/">Official rulebook page 25</a>
  </li>
  <li>
    <a target="_blank" href="https://ygorganization.com/perfect-rulebook-2017/">OCG Perfect Rulebook 2017 page 28</a>
  </li>
  <li><a target="_blank" href="https://web.archive.org/web/20190414183558/https://yugiohblog.konami.com/articles/?p=8318">Official KONAMI's article</a>, archived from the <a target="_blank" href="https://yugiohblog.konami.com/articles/?p=8318">original</a></li>
  <li>
    <a target="_blank" href="https://imgur.com/targeting-rules-insert-JH4NxL1">Insert from Rise of the True Dragons Structure Deck</a>
  </li>
  <li>YGOrg Database of Official OCG Rulings: <a target="_blank" href="https://db.ygoresources.com/qa#10331">"Meklord Emperor Granel"</a></li>
</ol>

<sup><a href="#">[1]</a></sup>

<!--
# Tooltip
-->

<span class="tooltip-anchor" data-name="58153103">"Armed Dragon Thunder LV10"</span>

<!--
# Glossary example
-->

<h2>Attach</h2>

<table align="center">
  <tbody>
    <tr>
      <td align="center" colspan="2"><b>Examples</b></td>
    </tr>
    <tr>
      <td align="center" width="100">
        <img loading="lazy" src="https://images.ygoprodeck.com/images/cards/34475451.jpg" alt="34475451" />
      </td>
      <td class="td-top">
        <strong>a</strong>
        <p>a</p>
      </td>
    </tr>
    <tr>
      <td align="center" width="100">
        <img loading="lazy" src="https://images.ygoprodeck.com/images/cards/23446369.jpg" alt="23446369" />
      </td>
      <td class="td-top">
        <strong>a</strong>
        <p>a</p>
      </td>
    </tr>
    <tr>
      <td align="center" width="100">
        <img loading="lazy" src="https://images.ygoprodeck.com/images/cards/3103067.jpg" alt="3103067" />
      </td>
      <td class="td-top">
        <strong>a</strong>
        <p>a</p>
      </td>
    </tr>
  </tbody>
</table>

<p><strong>Interaction with:</strong></p>
<ul class="glossary-entry-effect-interaction"></ul>

<em>References:</em>
<ol class="references"></ol>

<!--
# Example foldable
-->

<details>
  <summary>Example</summary>
  ${example}
  <hr />
</details>

<!--
# Yugipedia table example <tr>
-->
<script>
name = document.body.querySelector(".heading div").innerText
desc = document.body.querySelector(".lore").innerText.replaceAll("\n","<br>\n")
id = +document.body.querySelector("td .mw-redirect").innerText
elem = `
    <tr>
      <td align="center" width="100">
        <img loading="lazy" src="https://images.ygoprodeck.com/images/cards/${id}.jpg" alt="${id}" />
      </td>
      <td class="td-top">
        <strong>${name}</strong>
        <p>${desc}</p>
      </td>
    </tr>
`
console.log(elem)
</script>

<!--
# Add tooltips to text
-->

<script>
cards = Array.from(document.body.querySelectorAll(".card-link"))
for(card of cards) {
  try {
    let response = await fetch(`https://db.ygoprodeck.com/api/v7/cardinfo.php?name=${encodeURIComponent(card.innerText)}`)
    let { data } = await response.json();
    data = data[0]
    id = +data.id
    card.outerHTML = `<span class="tooltip-anchor" data-name="${id}">"${card.innerText}"</span>`
  }
  catch {}
}
q = document.querySelector("#qa-question").innerHTML
a = document.querySelector("#qa-answer section").innerHTML
text = `<u>Question:</u><br>${q}<br><u>Answer:</u><br>${a}`
.replaceAll("①st", "first")
.replaceAll("②nd", "second")
.replaceAll("③rd", "third")
.replaceAll("『"," \"")
.replaceAll("』","\" ")
.replaceAll("<br><br>","<br>")
.replaceAll("\u200E", "")
console.log(
  `"example": "`+text.replaceAll('"',"\\\"")+"\","
  +'"reference": "'
  +`<li>YGOrg Database of Official OCG Rulings: <a target="_blank" href="${window.location.href}">${[...new Set(cards.map(_=>'"'+_.innerText+'"'))].join(", ")}</a></li>`.replaceAll('"','\\"')
  +'"'
)
console.log(`<details><summary>Example</summary>${text}<hr /></details>`)
console.log(`<li>YGOrg Database of Official OCG Rulings: <a target="_blank" href="${window.location.href}">${[...new Set(cards.map(_=>'"'+_.innerText+'"'))].join(", ")}</a></li>`)

/*--------------*/

text = `Another example being "Centur-Ion Trudea": even if the effects of this card, which has been Special Summoned by this effect, are later negated, its Level will not return to the original value.`
regex = /"([^"]*)"/g;
cards = text.match(regex)
cards = [...new Set(cards)].filter(_=>_ !== '"unaffected by activated effects"')
for(card of cards) {
  try {
    let response = await fetch(`https://db.ygoprodeck.com/api/v7/cardinfo.php?name=${encodeURIComponent(card.replaceAll('"',""))}`)
    let { data } = await response.json();
    data = data[0]
    id = +data.id
    text = text.replaceAll(card, `<span class="tooltip-anchor" data-name="${id}">${card}</span>`)
  }
  catch {}
}
console.log(text.replaceAll('"',"\\\""))
console.log(`<details><summary>Example</summary>${text}<hr /></details>`)

</script>

<!--
# Check lowercase
-->
<script>
Array.from(document.querySelectorAll("li")).filter(li => li.innerHTML.charAt(0) === li.innerText.charAt(0).toLowerCase()).forEach(_=>console.log(_.innerHTML));
Array.from(document.querySelectorAll("li")).map(li => li.innerText.replaceAll(" ","").replaceAll("\n","")).filter(text => text.charAt(0) === text.charAt(0).toLowerCase() && text.charAt(0) !== '"').forEach(_=>console.log(_));
</script>

<!--
# Check long OCG rulings references
-->
<script>
Array.from(document.body.querySelectorAll("li")).filter(_=>_.innerHTML.includes("OCG Rulings")).map(_=>_.innerHTML).filter(_=>_.length > 300)

Array.from(document.body.querySelectorAll("li")).filter(_=>_.innerHTML.includes("OCG Rulings")).map(_=>_.innerText).filter(_=>_.split('", "').length > 2)
</script>

<!--
# Compare OCG DB updates YGOrg with my site
-->

<script>
ygorg = Array.from(document.body.querySelectorAll("a")).filter(a=>a.innerText.toLowerCase() === "source").map(a=>+a.href.split("fid=")[1].split("&")[0]).sort((a,b)=>a-b)

yoursite = Array.from(document.querySelectorAll("a")).map(a=>a.href).filter(href=>href.includes("https://db.ygoresources.com/qa")).map(href=>+href.replace("https://db.ygoresources.com/qa#","")).sort((a,b)=>a-b)
yoursite = [...new Set(yoursite)]
ygorg = 
yoursite.filter(_=>ygorg.includes(_))
</script>

<!--
# Compare OCG DB updates YGOrg with rulings list
-->

<script>
ygorg = Array.from(document.body.querySelectorAll("a")).filter(a=>a.innerText.toLowerCase() === "source").map(a=>+a.href.split("fid=")[1].split("&")[0]).sort((a,b)=>a-b)

yoursite = Array.from(document.querySelectorAll(".qa-entry")).map(a=>a.href).filter(href=>href.includes("https://db.ygoresources.com/qa")).map(href=>+href.replace("https://db.ygoresources.com/qa#","")).sort((a,b)=>a-b)
yoursite = [...new Set(yoursite)]
ygorg = 
yoursite.filter(_=>ygorg.includes(_))

tmp = ""
ygorg.filter(_=>!yoursite.includes(_)).forEach(_=>{
  tmp += `
  
  <a class="qa-entry" target="_blank" href="https://db.ygoresources.com/qa#${_}"><div class="qa-entry-text">Unknown Q&amp;A entry #${_}. Maybe the server is unreachable?</div><div class="qa-entry-tags"></div></a>
  <br>`
})
console.log(tmp)

</script>

<!--
# Reupdate all db resources
-->
<script>
yoursite = Array.from(document.querySelectorAll("a")).map(a=>a.href).filter(href=>href.includes("https://db.ygoresources.com/qa")).sort((a,b)=>a-b)
yoursite = [...new Set(yoursite)]

tmp = ""
count = 0
Array.from(document.body.querySelectorAll(".qa-entry")).forEach(_=>{
  if(!yoursite.includes(_.href)) {
    tmp += _.outerHTML.replace(`href="/`, `target="_blank" href="https://db.ygoresources.com/`)+"\n<br>\n\n"
    count += 1
  }
})
tmp += "<h1>"+count+"</h1>"
console.log(tmp)


tmp = ""
count = 0
dbsite = Array.from(document.body.querySelectorAll(".qa-entry")).map(_=>_.href)
yoursite.forEach(_=>{
  if(!dbsite.includes(_)) {
    tmp += _+"\n<br>\n\n"
    count += 1
  }
})
tmp += "<h1>"+count+"</h1>"
console.log(tmp)
</script>

<!--
# Yugipedia references extractor 
-->

<script>
references = Array.from(document.body.querySelectorAll(".references li"));

res = "";
for (let you = 3; you < references.length; i++) {
  const reference = references[i];
  let text = reference.querySelector(".reference-text");
  if (text == undefined) continue;
  text = text.innerText;
  let hrefs = Array.from(reference.querySelectorAll(".reference-text cite a"));
  hrefs = hrefs.map((_) => `<a href="${_.href}">${_.innerText.replace("the original", "original")}</a>`);
  res += `<li id="sub-steps_of_the_damage_step-${you - 9}">${hrefs.reduce((a, b) => a + ", archived from the " + b)} ${text}</li>`;
}
console.log(res);
</script>